@model MVCBasicCRUD.Models.Student

@{
    ViewBag.Title = "Create";
}

<div class="container">
    <h3>Create</h3>

    @if(ViewBag.Message != null)
    {
        <div class="well">
            @ViewBag.Message
        </div>
    }

    @*@using (Html.BeginForm("Insert", "Home", FormMethod.Post))
    {*@
        <div class="form-group">
            @Html.LabelFor(m => m.RollNo)
            @Html.TextBoxFor(s => s.RollNo, new { @class = "form-control" , id = "rollNo"})
            @Html.ValidationMessageFor(s => s.RollNo)
        </div>

        <div class="form-group">
            @Html.LabelFor(m => m.Name)
            @Html.TextBoxFor(s => s.Name, new { @class = "form-control", id = "name" })
            @Html.ValidationMessageFor(s => s.Name)
        </div>

        <div class="form-group">
            @Html.LabelFor(m => m.Marks)
            @Html.TextBoxFor(s => s.Marks, new { @class = "form-control", id = "marks" })
            @Html.ValidationMessageFor(s => s.Marks)
        </div>

        <input type="button" class="btn btn-primary" value="Save" name="save" onclick="createStudent()"/>
    @*}*@
</div>

<script type="text/javascript">

    function createStudent() {
        $.ajax({
            url: "http://localhost:52255/api/students/",
            type: 'POST',
            data: { RollNo: $("#rollNo").val(), Name: $("#name").val(), Marks: $("#marks").val()},
            success: function (result) {
                alert(result);
            },
            error: function (result) {
                console.log(result);
                alert(result);
            }
        });
    }

</script>